document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('postForm');
    const postList = document.getElementById('postList');

    // Fungsi untuk menampilkan postingan dari Local Storage
    function displayPosts() {
        const posts = JSON.parse(localStorage.getItem('posts')) || [];
        postList.innerHTML = ''; // Mengosongkan daftar sebelum menampilkan
        posts.forEach((post, index) => {
            const postCard = document.createElement('div');
            postCard.classList.add('card', 'mt-3');
            postCard.innerHTML = `
                <div class="card-header bg-primary text-white">
                    ${post.title} 
                    <button class="btn btn-sm btn-light float-right" onclick="editPost(${index})">Edit</button>
                </div>
                <div class="card-body">
                    <p>${post.content}</p>
                    <small class="text-muted">Tanggal: ${post.date}</small>
                </div>
            `;
            postList.appendChild(postCard);
        });
    }

    // Menampilkan postingan saat halaman dimuat
    displayPosts();

    // Menangani pengiriman form
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Mencegah reload halaman

        // Mengambil nilai dari input
        const title = document.getElementById('postTitle').value;
        const content = document.getElementById('postContent').value;
        const date = new Date().toLocaleString(); // Mendapatkan tanggal saat ini

        // Mengambil data yang ada di Local Storage
        const posts = JSON.parse(localStorage.getItem('posts')) || [];

        // Menambahkan postingan baru ke array
        posts.push({ title, content, date });

        // Menyimpan kembali ke Local Storage
        localStorage.setItem('posts', JSON.stringify(posts));

        // Menampilkan postingan terbaru
        displayPosts();

        // Mengosongkan form
        form.reset();
    });

    // Fungsi untuk mengedit postingan
    window.editPost = function(index) {
        const posts = JSON.parse(localStorage.getItem('posts')) || [];
        const post = posts[index];

        // Mengisi form dengan data postingan yang dipilih
        document.getElementById('postTitle').value = post.title;
        document.getElementById('postContent').value = post.content;

        // Menghapus postingan dari Local Storage
        posts.splice(index, 1);
        localStorage.setItem('posts', JSON.stringify(posts));

        // Menampilkan postingan setelah dihapus
        displayPosts();
    };
});